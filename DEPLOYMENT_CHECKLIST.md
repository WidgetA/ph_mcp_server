# Ubuntu æœåŠ¡å™¨éƒ¨ç½²æ£€æŸ¥æ¸…å•

åœ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œè¯·ç¡®ä¿å®Œæˆä»¥ä¸‹æ‰€æœ‰æ£€æŸ¥é¡¹ã€‚

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### æœåŠ¡å™¨è¦æ±‚
- [ ] Ubuntu 20.04 LTS æˆ–æ›´é«˜ç‰ˆæœ¬
- [ ] è‡³å°‘ 1GB RAM
- [ ] è‡³å°‘ 2GB å¯ç”¨ç£ç›˜ç©ºé—´
- [ ] Root æˆ– sudo æƒé™
- [ ] å¼€æ”¾ 8080 ç«¯å£ï¼ˆæˆ–è‡ªå®šä¹‰ç«¯å£ï¼‰

### å¿…éœ€æœåŠ¡å’Œå·¥å…·
- [ ] Python 3.10+ å·²å®‰è£…
- [ ] Git å·²å®‰è£…
- [ ] curl å·²å®‰è£…
- [ ] uv å·²å®‰è£…æˆ–å¯è‡ªåŠ¨å®‰è£…

### é…ç½®å‡†å¤‡
- [ ] Supabase URL å’Œ KEY å·²è·å–
- [ ] æ•°æ®åº“è¡¨ (ph_products, ph_daily_reports) å·²åˆ›å»º
- [ ] åŸŸåå·²è§£æï¼ˆå¦‚æœä½¿ç”¨åŸŸåï¼‰
- [ ] SSL è¯ä¹¦å·²å‡†å¤‡ï¼ˆå¦‚æœä½¿ç”¨ HTTPSï¼‰

## ğŸš€ éƒ¨ç½²æ­¥éª¤æ£€æŸ¥

### 1. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
```bash
# æ–¹å¼ 1: ä½¿ç”¨ Git
- [ ] git clone <repository-url>

# æ–¹å¼ 2: ä½¿ç”¨ SCP
- [ ] scp -r ph_mcp_server user@server:/tmp/

# æ–¹å¼ 3: ä½¿ç”¨ rsync
- [ ] rsync -avz ph_mcp_server/ user@server:/tmp/ph_mcp_server/
```

### 2. è¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬
```bash
cd /tmp/ph_mcp_server
sudo bash deploy/deploy.sh
```

æ£€æŸ¥é¡¹ï¼š
- [ ] ç³»ç»Ÿä¾èµ–å®‰è£…æˆåŠŸ
- [ ] uv å®‰è£…æˆåŠŸ
- [ ] Python ä¾èµ–å®‰è£…æˆåŠŸ
- [ ] é¡¹ç›®æ–‡ä»¶å¤åˆ¶åˆ° /opt/ph_mcp_server
- [ ] systemd æœåŠ¡æ–‡ä»¶å·²å®‰è£…
- [ ] é˜²ç«å¢™è§„åˆ™å·²æ·»åŠ 

### 3. é…ç½®ç¯å¢ƒå˜é‡
```bash
sudo nano /opt/ph_mcp_server/.env
```

æ£€æŸ¥é…ç½®ï¼š
- [ ] SUPABASE_URL å¡«å†™æ­£ç¡®
- [ ] SUPABASE_KEY å¡«å†™æ­£ç¡®
- [ ] PRODUCTS_TABLE æ­£ç¡®ï¼ˆé»˜è®¤ ph_productsï¼‰
- [ ] REPORTS_TABLE æ­£ç¡®ï¼ˆé»˜è®¤ ph_daily_reportsï¼‰
- [ ] MCP_SERVER_PORT è®¾ç½®æ­£ç¡®ï¼ˆé»˜è®¤ 8080ï¼‰
- [ ] MCP_SERVER_HOST è®¾ç½®æ­£ç¡®ï¼ˆé»˜è®¤ 0.0.0.0ï¼‰

### 4. å¯åŠ¨å’ŒéªŒè¯æœåŠ¡
```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start ph-mcp-server

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status ph-mcp-server

# å¯ç”¨å¼€æœºè‡ªå¯
sudo systemctl enable ph-mcp-server
```

æ£€æŸ¥é¡¹ï¼š
- [ ] æœåŠ¡çŠ¶æ€ä¸º active (running)
- [ ] æ²¡æœ‰é”™è¯¯æ—¥å¿—
- [ ] è¿›ç¨‹æ­£å¸¸è¿è¡Œ
- [ ] å¼€æœºè‡ªå¯å·²å¯ç”¨

### 5. æµ‹è¯•è¿æ¥
```bash
# æœ¬åœ°æµ‹è¯•
curl http://localhost:8080/health

# å¤–éƒ¨æµ‹è¯•
curl http://your-server-ip:8080/health
```

é¢„æœŸå“åº”ï¼š
```json
{
  "status": "healthy",
  "service": "Product Hunt MCP Server",
  "version": "1.0.0",
  "mode": "remote",
  "port": 8080
}
```

æ£€æŸ¥é¡¹ï¼š
- [ ] å¥åº·æ£€æŸ¥ç«¯ç‚¹æ­£å¸¸å“åº”
- [ ] æ ¹è·¯å¾„ (/) è¿”å›æœåŠ¡ä¿¡æ¯
- [ ] MCP ç«¯ç‚¹ (/sse) å¯è®¿é—®
- [ ] ä»å¤–éƒ¨ç½‘ç»œå¯ä»¥è®¿é—®ï¼ˆå¦‚éœ€è¦ï¼‰

## ğŸ”’ å®‰å…¨é…ç½®æ£€æŸ¥

### é˜²ç«å¢™
```bash
sudo ufw status
```

æ£€æŸ¥é¡¹ï¼š
- [ ] SSH (22) ç«¯å£å·²å¼€æ”¾
- [ ] MCP ç«¯å£ (8080) å·²å¼€æ”¾æˆ–é€šè¿‡ Nginx ä»£ç†
- [ ] å…¶ä»–ä¸å¿…è¦ç«¯å£å·²å…³é—­

### æ–‡ä»¶æƒé™
```bash
ls -la /opt/ph_mcp_server/
```

æ£€æŸ¥é¡¹ï¼š
- [ ] ç›®å½•å±ä¸»ä¸º www-data:www-data
- [ ] .env æ–‡ä»¶æƒé™ä¸º 600 æˆ– 640
- [ ] è„šæœ¬æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™
- [ ] æ—¥å¿—ç›®å½•å¯å†™

### systemd æœåŠ¡å®‰å…¨
æ£€æŸ¥ `/etc/systemd/system/ph-mcp-server.service`ï¼š
- [ ] User=www-dataï¼ˆé root ç”¨æˆ·ï¼‰
- [ ] NoNewPrivileges=true
- [ ] PrivateTmp=true
- [ ] ProtectSystem=strict
- [ ] ProtectHome=true

## ğŸŒ Nginx é…ç½®ï¼ˆå¯é€‰ï¼‰

### å®‰è£… Nginx
```bash
sudo apt-get install -y nginx
```

### é…ç½®åå‘ä»£ç†
```bash
sudo cp deploy/nginx.conf /etc/nginx/sites-available/ph-mcp-server
sudo nano /etc/nginx/sites-available/ph-mcp-server  # ä¿®æ”¹ server_name
sudo ln -s /etc/nginx/sites-available/ph-mcp-server /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

æ£€æŸ¥é¡¹ï¼š
- [ ] Nginx é…ç½®è¯­æ³•æ­£ç¡®
- [ ] server_name å·²ä¿®æ”¹ä¸ºå®é™…åŸŸå
- [ ] åå‘ä»£ç†æ­£å¸¸å·¥ä½œ
- [ ] å¯é€šè¿‡åŸŸåè®¿é—®æœåŠ¡

### SSL è¯ä¹¦é…ç½®ï¼ˆæ¨èï¼‰
```bash
sudo apt-get install -y certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

æ£€æŸ¥é¡¹ï¼š
- [ ] SSL è¯ä¹¦å®‰è£…æˆåŠŸ
- [ ] HTTPS è®¿é—®æ­£å¸¸
- [ ] è‡ªåŠ¨ç»­æœŸå·²é…ç½®
- [ ] HTTP è‡ªåŠ¨é‡å®šå‘åˆ° HTTPS

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—æ£€æŸ¥
```bash
# å®æ—¶æ—¥å¿—
sudo journalctl -u ph-mcp-server -f

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œ
sudo journalctl -u ph-mcp-server -n 100

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo journalctl -u ph-mcp-server -p err
```

æ£€æŸ¥é¡¹ï¼š
- [ ] æœåŠ¡å¯åŠ¨æ—¥å¿—æ­£å¸¸
- [ ] æ²¡æœ‰ä¸¥é‡é”™è¯¯ï¼ˆERRORï¼‰
- [ ] æ•°æ®åº“è¿æ¥æˆåŠŸ
- [ ] MCP å·¥å…·åŠ è½½æ­£å¸¸

### èµ„æºç›‘æ§
```bash
# ç³»ç»Ÿèµ„æº
htop

# æœåŠ¡çŠ¶æ€
systemctl status ph-mcp-server

# ç£ç›˜ç©ºé—´
df -h

# å†…å­˜ä½¿ç”¨
free -h
```

æ£€æŸ¥é¡¹ï¼š
- [ ] CPU ä½¿ç”¨ç‡æ­£å¸¸ï¼ˆ<50%ï¼‰
- [ ] å†…å­˜ä½¿ç”¨æ­£å¸¸ï¼ˆ<70%ï¼‰
- [ ] ç£ç›˜ç©ºé—´å……è¶³ï¼ˆ>1GBï¼‰
- [ ] æ²¡æœ‰å†…å­˜æ³„æ¼è¿¹è±¡

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### MCP å·¥å…·æµ‹è¯•
è¿æ¥åˆ° Claude Desktop æˆ–å…¶ä»– MCP å®¢æˆ·ç«¯ï¼Œæµ‹è¯•ï¼š

- [ ] get_latest_products - èƒ½è·å–æœ€æ–°äº§å“
- [ ] get_products_by_date - èƒ½æŒ‰æ—¥æœŸæŸ¥è¯¢
- [ ] search_products - æœç´¢åŠŸèƒ½æ­£å¸¸
- [ ] get_top_products - èƒ½è·å–çƒ­é—¨äº§å“
- [ ] get_latest_report - èƒ½è·å–æœ€æ–°æŠ¥å‘Š
- [ ] get_report_by_date - èƒ½æŒ‰æ—¥æœŸè·å–æŠ¥å‘Š
- [ ] get_reports_by_date_range - èŒƒå›´æŸ¥è¯¢æ­£å¸¸

### æ€§èƒ½æµ‹è¯•
```bash
# å¹¶å‘æµ‹è¯•ï¼ˆä½¿ç”¨ ab æˆ– wrkï¼‰
ab -n 1000 -c 10 http://localhost:8080/health

# å“åº”æ—¶é—´æµ‹è¯•
time curl http://localhost:8080/health
```

æ£€æŸ¥é¡¹ï¼š
- [ ] å“åº”æ—¶é—´ <1 ç§’
- [ ] å¹¶å‘å¤„ç†æ­£å¸¸
- [ ] æ²¡æœ‰è¿æ¥è¶…æ—¶
- [ ] é”™è¯¯ç‡ <1%

## ğŸ’¾ å¤‡ä»½é…ç½®

### åˆ›å»ºå¤‡ä»½
```bash
# å¤‡ä»½é…ç½®
sudo cp /opt/ph_mcp_server/.env /opt/ph_mcp_server/.env.backup

# å¤‡ä»½æ•´ä¸ªç›®å½•
sudo tar -czf /backup/ph_mcp_server_$(date +%Y%m%d).tar.gz /opt/ph_mcp_server
```

æ£€æŸ¥é¡¹ï¼š
- [ ] .env æ–‡ä»¶å·²å¤‡ä»½
- [ ] å®šæœŸå¤‡ä»½è®¡åˆ’å·²è®¾ç½®
- [ ] å¤‡ä»½å¯æ¢å¤æ€§å·²æµ‹è¯•
- [ ] Supabase æ•°æ®åº“å¤‡ä»½å·²é…ç½®

## ğŸ“ æ–‡æ¡£å’Œç»´æŠ¤

### æ–‡æ¡£å‡†å¤‡
- [ ] æœåŠ¡å™¨ç™»å½•ä¿¡æ¯å·²è®°å½•
- [ ] æ•°æ®åº“è¿æ¥ä¿¡æ¯å·²ä¿å­˜
- [ ] åŸŸåå’Œ DNS é…ç½®å·²è®°å½•
- [ ] SSL è¯ä¹¦åˆ°æœŸæ—¶é—´å·²è®°å½•
- [ ] è”ç³»äººä¿¡æ¯å·²æ›´æ–°

### ç»´æŠ¤è®¡åˆ’
- [ ] è®¾ç½®æ—¥å¿—è½®è½¬
- [ ] é…ç½®ç›‘æ§å‘Šè­¦
- [ ] åˆ¶å®šæ›´æ–°è®¡åˆ’
- [ ] å‡†å¤‡åº”æ€¥é¢„æ¡ˆ
- [ ] æ–‡æ¡£æ›´æ–°æµç¨‹

## âœ… æœ€ç»ˆæ£€æŸ¥

åœ¨æ ‡è®°éƒ¨ç½²å®Œæˆå‰ï¼š

- [ ] æ‰€æœ‰ä¸Šè¿°æ£€æŸ¥é¡¹å·²å®Œæˆ
- [ ] æœåŠ¡å·²è¿è¡Œè‡³å°‘ 1 å°æ—¶æ— é”™è¯¯
- [ ] è´Ÿè½½æµ‹è¯•é€šè¿‡
- [ ] å¤‡ä»½å·²éªŒè¯
- [ ] ç›‘æ§å·²é…ç½®
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] å›¢é˜Ÿå·²åŸ¹è®­
- [ ] åº”æ€¥è”ç³»äººå·²é€šçŸ¥

## ğŸ¯ éƒ¨ç½²åä»»åŠ¡

å®Œæˆéƒ¨ç½²åçš„ 24 å°æ—¶å†…ï¼š

- [ ] ç›‘æ§æ—¥å¿—ï¼Œç¡®ä¿æ— å¼‚å¸¸
- [ ] éªŒè¯æ‰€æœ‰ MCP å·¥å…·åŠŸèƒ½
- [ ] æ£€æŸ¥æ•°æ®åº“è¿æ¥ç¨³å®šæ€§
- [ ] æµ‹è¯•ä»å®¢æˆ·ç«¯è¿æ¥
- [ ] è®°å½•ä»»ä½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

å®Œæˆéƒ¨ç½²åçš„ä¸€å‘¨å†…ï¼š

- [ ] å®¡æŸ¥æ€§èƒ½æŒ‡æ ‡
- [ ] ä¼˜åŒ–é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] åˆ¶å®šæ”¹è¿›è®¡åˆ’

## ğŸ“ æ”¯æŒå’Œå¸®åŠ©

é‡åˆ°é—®é¢˜æ—¶ï¼š

1. æŸ¥çœ‹æ—¥å¿—: `sudo journalctl -u ph-mcp-server -n 200`
2. æŸ¥çœ‹æ–‡æ¡£: [deploy/README.md](deploy/README.md)
3. æ£€æŸ¥é…ç½®: `sudo cat /opt/ph_mcp_server/.env`
4. æµ‹è¯•è¿æ¥: `curl http://localhost:8080/health`
5. é‡å¯æœåŠ¡: `sudo systemctl restart ph-mcp-server`

---

**å®Œæˆæ—¥æœŸ**: ________________
**éƒ¨ç½²äººå‘˜**: ________________
**å®¡æ ¸äººå‘˜**: ________________
**å¤‡æ³¨**:
